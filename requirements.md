# ガントチャートWebアプリケーション 要件定義書

## プロジェクト概要

### プロジェクト名
ガントチャート管理システム

### 目的
プロジェクト管理者が効率的にタスクスケジュールを管理・可視化できるWebベースのガントチャートアプリケーションを提供する。

### 対象ユーザー
- プロジェクトマネージャー
- システム開発者
- Webサイト制作者
- その他プロジェクト管理を行う担当者

## 技術スタック

### フロントエンド
- **Next.js** v14.2.25 (App Router)
- **React** v18.2.0
- **TypeScript** v5.2.2
- **Tailwind CSS** v3.4.1
- **Shadcn/ui** (UIコンポーネント)
- **Radix UI** (アクセシブルなヘッドレスUI)
- **Lucide React** v0.446.0 (アイコン)

### バックエンド
- **Next.js API Routes**
- **Prisma** v5.11.0 (ORM)
- **supabase** (本番環境)
- **Local SqLite** (開発環境)

### 認証
- **Clerk** v6.12.9 (認証・ユーザー管理)

### その他
- **date-fns** v3.6.0 (日付操作)
- **ExcelJS** (Excelエクスポート)

## 機能要件

### 1. 認証機能
- **ユーザー認証**: Clerkを使用したサインイン/サインアップ
- **ユーザー管理**: プロフィール管理、ログアウト機能
- **セキュリティ**: ミドルウェアによる認証チェック

### 2. プロジェクト管理機能
- **プロジェクト作成**: 新規プロジェクトの作成
- **プロジェクト一覧**: ユーザーが所有するプロジェクトの一覧表示
- **プロジェクト選択**: 複数プロジェクトの切り替え
- **プロジェクト削除**: 不要なプロジェクトの削除

### 3. タスク管理機能

#### 3.1 タスク操作
- **タスク作成**: 新規タスクの追加
- **タスク編集**: タスク名、担当者、期間の編集
- **タスク削除**: 不要なタスクの削除
- **タスク複製**: 既存タスクのコピー作成
- **タスク並び替え**: ドラッグ&ドロップによる順序変更

#### 3.2 タスク属性
- **タスク名**: 作業内容の説明
- **担当者**: 「弊社」「お客様」「弊社/お客様」「その他」から選択
- **予定期間**: 計画された開始日・終了日
- **階層レベル**: 階層なし
- **並び順**: 表示順序

### 4. ガントチャート表示機能

#### 4.1 日付軸
- **日付範囲**: プロジェクト開始日から6ヶ月間
- **日付表示**: 月/日、曜日表示
- **今日の強調**: 現在日の色分け表示
- **週末表示**: 土日の背景色変更
- **祝日表示**: 日本の祝日の色分け表示

#### 4.2 ガントバー
- **予定バー**: 青色系で計画期間を表示
- **ドラッグ操作**: バーの移動・リサイズによる期間変更 #重要機能
- **視覚的フィードバック**: ドラッグ中のハイライト表示

#### 4.3 レイアウト
- **タスクツリー**: 左側にタスク一覧
- **ガントエリア**: 右側にガントバー表示
- **ヘッダー**: 日付軸
- **レスポンシブ**: PC専用設計

### 5. データ管理機能
- **自動保存**: タスク変更時の自動保存
- **データ永続化**: PostgreSQL/SQLiteによるデータ保存
- **データ整合性**: トランザクション処理による一貫性保証

### 6. エクスポート機能
- **Excelエクスポート**: ガントチャートをExcelファイルで出力
- **日付範囲**: 表示中の日付範囲をそのまま出力
- **フォーマット**: 見やすいレイアウトで整形

### 7. テンプレート機能
- **システム開発テンプレート**: 一般的なシステム開発工程
- **Webサイト制作テンプレート**: Web制作の標準的な工程
- **テンプレート適用**: 新規プロジェクト作成時に選択可能

## 非機能要件

### 1. パフォーマンス
- **レスポンス時間**: 画面遷移3秒以内
- **ドラッグ操作**: リアルタイム更新
- **大量データ**: 100タスクまで快適動作

### 2. 可用性
- **稼働率**: 99%以上（本番環境）
- **バックアップ**: 自動バックアップ機能

### 3. セキュリティ
- **認証**: Clerk認証による安全なアクセス制御
- **データ保護**: ユーザーデータの分離
- **API保護**: 認証済みユーザーのみアクセス可能

### 4. 互換性
- **ブラウザ**: Chrome、Firefox、Safari、Edge最新版
- **OS**: Windows、macOS、Linux
- **画面解像度**: 1920x1080以上推奨

### 5. 保守性
- **コード品質**: TypeScript、ESLint使用
- **テスト**: 単体テスト実装
- **ドキュメント**: コメント・README整備

## データベース設計

### 1. テーブル構成

#### Projects テーブル
- `id`: プロジェクトID (Primary Key)
- `title`: プロジェクト名
- `startDate`: 開始日
- `userId`: ユーザーID (Clerk)
- `createdAt`: 作成日時
- `updatedAt`: 更新日時

#### Tasks テーブル
- `id`: タスクID (Primary Key)
- `title`: タスク名
- `assignee`: 担当者
- `plannedStart`: 予定開始日
- `plannedEnd`: 予定終了日
- `order`: 表示順序
- `deleted`: 削除フラグ
- `projectId`: プロジェクトID (Foreign Key)
- `createdAt`: 作成日時
- `updatedAt`: 更新日時

### 2. リレーション
- Projects 1:N Tasks
- Tasks 1:N Tasks (親子関係)


## UI/UX設計

### 1. レイアウト構成
- **ヘッダー**: プロジェクト名、認証情報、操作ボタン
- **メインエリア**: タスクツリー（左）+ ガントチャート（右）
- **モーダル**: タスク詳細編集

### 2. 操作性　#重要機能
- **直感的操作**: ドラッグ&ドロップによる期間変更 
- **キーボード操作**: Enterキーによるタスク追加
- **視覚的フィードバック**: ホバー効果、選択状態の表示

### 3. アクセシビリティ
- **キーボードナビゲーション**: Tab移動対応
- **スクリーンリーダー**: 適切なARIAラベル
- **色覚対応**: 色以外の視覚的区別

## 開発・運用要件

### 1. 開発環境
- **Node.js**: 18.x以上
- **パッケージマネージャー**: npm
- **開発サーバー**: Next.js開発サーバー
- **データベース**: SQLite (開発) 

### 2. 本番環境
- **デプロイ**: Vercel推奨
- **データベース**: supabase
- **環境変数**: 適切な設定管理

### 3. 品質管理
- **コード品質**: ESLint、TypeScript
- **バージョン管理**: Git
- **CI/CD**: 自動デプロイ設定

## 制約事項

### 1. 機能制約
- **対応デバイス**: PC専用（モバイル・タブレット非対応）
- **言語**: 日本語のみ
- **テーマ**: ライトテーマのみ（ダークモード非対応）

### 2. 技術制約
- **ブラウザ**: モダンブラウザのみ対応
- **JavaScript**: 必須（無効時は動作不可）
- **ネットワーク**: インターネット接続必須

### 3. 運用制約
- **バックアップ**: Excelエクスポートのみ
- **アンドゥ/リドゥ**: 非対応
- **リアルタイム同期**: 非対応


---

**作成日**: 2025年1月27日  
**バージョン**: 1.0  
**作成者**: AI Assistant  
**承認者**: プロジェクトマネージャー 